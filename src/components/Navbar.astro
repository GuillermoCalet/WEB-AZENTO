---
/**
 * Navbar.astro - Barra de navegación con efecto glassmorphism
 * Sticky navigation con backdrop-blur y diseño elegante
 */

// Datos de navegación - Fácil de editar
const navLinks = [
	{ label: "Inicio", href: "#inicio" },
	{ label: "Servicios", href: "#servicios" },
	{ label: "Proyectos", href: "#proyectos" },
	{ label: "Contacto", href: "#contacto" },
];

const ctaButton = {
	label: "Pedir Presupuesto",
	href: "#contacto",
};

const logo = {
	text: "AZento",
	accent: "Home",
};
---

<nav 
	id="navbar"
	class="fixed top-0 left-0 right-0 z-50 transition-all duration-300"
>
	<div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8">
		<div class="flex h-20 items-center justify-between">
			<!-- Logo -->
			<a 
				href="#inicio" 
				class="flex items-center gap-1 text-2xl font-display font-semibold group"
			>
				<span class="text-forest-700 group-hover:text-forest-600 transition-colors">
					{logo.text}
				</span>
				<span class="text-gold-500 group-hover:text-gold-400 transition-colors">
					{logo.accent}
				</span>
			</a>

			<!-- Desktop Navigation -->
			<div class="hidden md:flex items-center gap-8">
				<!-- Nav Links -->
				<ul class="flex items-center gap-6">
					{navLinks.map((link) => (
						<li>
							<a 
								href={link.href}
								class="relative text-forest-800 font-medium text-sm tracking-wide hover:text-forest-600 transition-colors py-2
									after:absolute after:bottom-0 after:left-0 after:h-0.5 after:w-0 after:bg-gold-500 
									after:transition-all after:duration-300 hover:after:w-full"
							>
								{link.label}
							</a>
						</li>
					))}
				</ul>

				<!-- CTA Button -->
				<a 
					href={ctaButton.href}
					class="inline-flex items-center gap-2 bg-forest-700 text-white px-6 py-2.5 rounded-full 
						font-medium text-sm tracking-wide shadow-lg shadow-forest-700/25
						hover:bg-forest-600 hover:shadow-xl hover:shadow-forest-700/30 
						hover:-translate-y-0.5 transition-all duration-300"
				>
					{ctaButton.label}
				</a>
			</div>

			<!-- Mobile Menu Button -->
			<button 
				id="mobile-menu-btn"
				class="md:hidden flex flex-col justify-center items-center w-10 h-10 rounded-lg 
					hover:bg-forest-100/50 transition-colors"
				aria-label="Abrir menú"
				aria-expanded="false"
			>
				<span class="hamburger-line w-6 h-0.5 bg-forest-700 transition-all duration-300"></span>
				<span class="hamburger-line w-6 h-0.5 bg-forest-700 mt-1.5 transition-all duration-300"></span>
				<span class="hamburger-line w-6 h-0.5 bg-forest-700 mt-1.5 transition-all duration-300"></span>
			</button>
		</div>
	</div>

	<!-- Mobile Menu -->
	<div 
		id="mobile-menu"
		class="md:hidden absolute top-full left-0 right-0 bg-white/95 backdrop-blur-xl 
			border-t border-sand-200 shadow-xl opacity-0 invisible 
			-translate-y-4 transition-all duration-300"
	>
		<div class="px-4 py-6 space-y-4">
			<ul class="space-y-3">
				{navLinks.map((link) => (
					<li>
						<a 
							href={link.href}
							class="block text-forest-800 font-medium text-lg py-2 px-4 rounded-lg
								hover:bg-forest-50 hover:text-forest-600 transition-colors"
						>
							{link.label}
						</a>
					</li>
				))}
			</ul>
			<div class="pt-4 border-t border-sand-200">
				<a 
					href={ctaButton.href}
					class="block text-center bg-forest-700 text-white px-6 py-3 rounded-full 
						font-medium shadow-lg hover:bg-forest-600 transition-colors"
				>
					{ctaButton.label}
				</a>
			</div>
		</div>
	</div>
</nav>

<style>
	/* Estado inicial transparente, cambia al hacer scroll */
	#navbar {
		background: transparent;
	}
	
	#navbar.scrolled {
		background: rgba(255, 255, 255, 0.85);
		backdrop-filter: blur(20px);
		-webkit-backdrop-filter: blur(20px);
		border-bottom: 1px solid rgba(232, 223, 202, 0.5);
		box-shadow: 0 4px 30px rgba(26, 77, 46, 0.05);
	}
	
	/* Cambio de color del logo cuando hay scroll */
	#navbar:not(.scrolled) a {
		color: white;
	}
	
	#navbar:not(.scrolled) .text-gold-500 {
		color: #C5A028;
	}
	
	#navbar:not(.scrolled) .hamburger-line {
		background-color: white;
	}
	
	/* Mobile menu open state */
	#mobile-menu.open {
		opacity: 1;
		visibility: visible;
		transform: translateY(0);
	}
	
	/* Hamburger animation */
	#mobile-menu-btn.open .hamburger-line:nth-child(1) {
		transform: translateY(8px) rotate(45deg);
	}
	
	#mobile-menu-btn.open .hamburger-line:nth-child(2) {
		opacity: 0;
	}
	
	#mobile-menu-btn.open .hamburger-line:nth-child(3) {
		transform: translateY(-8px) rotate(-45deg);
	}
</style>

<script>
	// Scroll detection para cambiar estilo del navbar
	const navbar = document.getElementById('navbar');
	
	const handleScroll = () => {
		if (window.scrollY > 50) {
			navbar?.classList.add('scrolled');
		} else {
			navbar?.classList.remove('scrolled');
		}
	};
	
	window.addEventListener('scroll', handleScroll);
	handleScroll(); // Check initial state
	
	// Mobile menu toggle
	const mobileMenuBtn = document.getElementById('mobile-menu-btn');
	const mobileMenu = document.getElementById('mobile-menu');
	
	mobileMenuBtn?.addEventListener('click', () => {
		const isOpen = mobileMenu?.classList.contains('open');
		
		if (isOpen) {
			mobileMenu?.classList.remove('open');
			mobileMenuBtn?.classList.remove('open');
			mobileMenuBtn?.setAttribute('aria-expanded', 'false');
		} else {
			mobileMenu?.classList.add('open');
			mobileMenuBtn?.classList.add('open');
			mobileMenuBtn?.setAttribute('aria-expanded', 'true');
		}
	});
	
	// Close menu when clicking on a link
	const mobileLinks = mobileMenu?.querySelectorAll('a');
	mobileLinks?.forEach(link => {
		link.addEventListener('click', () => {
			mobileMenu?.classList.remove('open');
			mobileMenuBtn?.classList.remove('open');
			mobileMenuBtn?.setAttribute('aria-expanded', 'false');
		});
	});
</script>
