---
/**
 * Navbar.astro - Barra de navegación con efecto glassmorphism
 * Sticky navigation con backdrop-blur y diseño elegante
 */

// Datos de navegación - Fácil de editar
const navLinks = [
	{ label: "Inicio", href: "#inicio" },
	{ label: "Servicios", href: "#servicios" },
	{ label: "Proyectos", href: "#proyectos" },
	{ label: "Contacto", href: "#contacto" },
];

const ctaButton = {
	label: "Pedir Presupuesto",
	href: "#contacto",
};
---

<nav 
	id="navbar"
	class="fixed top-0 left-0 right-0 z-50 transition-all duration-300"
>
	<div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8">
		<div class="flex h-20 items-center justify-between">
			<!-- Logo AZento Home Solutions -->
			<a 
				href="#inicio" 
				class="relative flex items-center group"
			>
				<!-- Contenedor del logo con fondo que coincide con el logo -->
				<div class="logo-container relative rounded-lg overflow-hidden transition-all duration-300
					group-hover:scale-[1.02] group-hover:shadow-lg">
					<img 
						src="/images/logo_azento.jpg" 
						alt="AZento Home Solutions" 
						class="h-14 w-auto object-contain"
					/>
				</div>
			</a>

			<!-- Desktop Navigation -->
			<div class="hidden md:flex items-center gap-8">
				<!-- Nav Links -->
				<ul class="flex items-center gap-6">
					{navLinks.map((link) => (
						<li>
							<a 
								href={link.href}
								class="nav-link relative font-medium text-sm tracking-wide py-2 transition-colors
									after:absolute after:bottom-0 after:left-0 after:h-0.5 after:w-0 after:bg-accent-400 
									after:transition-all after:duration-300 hover:after:w-full"
							>
								{link.label}
							</a>
						</li>
					))}
				</ul>

				<!-- CTA Button -->
				<a 
					href={ctaButton.href}
					class="inline-flex items-center gap-2 bg-azento-600 text-white px-6 py-2.5 rounded-full 
						font-medium text-sm tracking-wide shadow-lg shadow-azento-600/25
						hover:bg-azento-500 hover:shadow-xl hover:shadow-azento-600/30 
						hover:-translate-y-0.5 transition-all duration-300"
				>
					{ctaButton.label}
				</a>
			</div>

			<!-- Mobile Menu Button -->
			<button 
				id="mobile-menu-btn"
				class="md:hidden flex flex-col justify-center items-center w-10 h-10 rounded-lg 
					hover:bg-azento-100/50 transition-colors"
				aria-label="Abrir menú"
				aria-expanded="false"
			>
				<span class="hamburger-line w-6 h-0.5 bg-azento-600 transition-all duration-300"></span>
				<span class="hamburger-line w-6 h-0.5 bg-azento-600 mt-1.5 transition-all duration-300"></span>
				<span class="hamburger-line w-6 h-0.5 bg-azento-600 mt-1.5 transition-all duration-300"></span>
			</button>
		</div>
	</div>

	<!-- Mobile Menu -->
	<div 
		id="mobile-menu"
		class="md:hidden absolute top-full left-0 right-0 bg-white/95 backdrop-blur-xl 
			border-t border-neutral-200 shadow-xl opacity-0 invisible 
			-translate-y-4 transition-all duration-300"
	>
		<div class="px-4 py-6 space-y-4">
			<ul class="space-y-3">
				{navLinks.map((link) => (
					<li>
						<a 
							href={link.href}
							class="block text-azento-700 font-medium text-lg py-2 px-4 rounded-lg
								hover:bg-azento-50 hover:text-azento-600 transition-colors"
						>
							{link.label}
						</a>
					</li>
				))}
			</ul>
			<div class="pt-4 border-t border-neutral-200">
				<a 
					href={ctaButton.href}
					class="block text-center bg-azento-600 text-white px-6 py-3 rounded-full 
						font-medium shadow-lg hover:bg-azento-500 transition-colors"
				>
					{ctaButton.label}
				</a>
			</div>
		</div>
	</div>
</nav>

<style>
	/* Estado inicial transparente, cambia al hacer scroll */
	#navbar {
		background: transparent;
	}
	
	#navbar.scrolled {
		background: rgba(255, 255, 255, 0.9);
		backdrop-filter: blur(20px);
		-webkit-backdrop-filter: blur(20px);
		border-bottom: 1px solid rgba(166, 166, 166, 0.2);
		box-shadow: 0 4px 30px rgba(67, 95, 105, 0.08);
	}
	
	/* Estilos del logo y nav cuando NO hay scroll (sobre hero oscuro) */
	#navbar:not(.scrolled) .logo-container {
		background: #1c2227;
		box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
	}
	
	#navbar:not(.scrolled) .nav-link {
		color: white;
	}
	
	#navbar:not(.scrolled) .nav-link:hover {
		color: #c4a882;
	}
	
	#navbar:not(.scrolled) .hamburger-line {
		background-color: white;
	}
	
	/* Estilos cuando hay scroll (fondo claro) */
	#navbar.scrolled .logo-container {
		background: white;
		box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
	}
	
	#navbar.scrolled .nav-link {
		color: #435f69;
	}
	
	#navbar.scrolled .nav-link:hover {
		color: #5b727b;
	}
	
	/* Mobile menu open state */
	#mobile-menu.open {
		opacity: 1;
		visibility: visible;
		transform: translateY(0);
	}
	
	/* Hamburger animation */
	#mobile-menu-btn.open .hamburger-line:nth-child(1) {
		transform: translateY(8px) rotate(45deg);
	}
	
	#mobile-menu-btn.open .hamburger-line:nth-child(2) {
		opacity: 0;
	}
	
	#mobile-menu-btn.open .hamburger-line:nth-child(3) {
		transform: translateY(-8px) rotate(-45deg);
	}
</style>

<script>
	// Scroll detection para cambiar estilo del navbar
	const navbar = document.getElementById('navbar');
	
	const handleScroll = () => {
		if (window.scrollY > 50) {
			navbar?.classList.add('scrolled');
		} else {
			navbar?.classList.remove('scrolled');
		}
	};
	
	window.addEventListener('scroll', handleScroll);
	handleScroll(); // Check initial state
	
	// Mobile menu toggle
	const mobileMenuBtn = document.getElementById('mobile-menu-btn');
	const mobileMenu = document.getElementById('mobile-menu');
	
	mobileMenuBtn?.addEventListener('click', () => {
		const isOpen = mobileMenu?.classList.contains('open');
		
		if (isOpen) {
			mobileMenu?.classList.remove('open');
			mobileMenuBtn?.classList.remove('open');
			mobileMenuBtn?.setAttribute('aria-expanded', 'false');
		} else {
			mobileMenu?.classList.add('open');
			mobileMenuBtn?.classList.add('open');
			mobileMenuBtn?.setAttribute('aria-expanded', 'true');
		}
	});
	
	// Close menu when clicking on a link
	const mobileLinks = mobileMenu?.querySelectorAll('a');
	mobileLinks?.forEach(link => {
		link.addEventListener('click', () => {
			mobileMenu?.classList.remove('open');
			mobileMenuBtn?.classList.remove('open');
			mobileMenuBtn?.setAttribute('aria-expanded', 'false');
		});
	});
</script>
